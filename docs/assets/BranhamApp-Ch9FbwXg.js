import{r as c,J as xs,W as Ge,j as e,I as u,M as Je,R as wt,B as us,C as yt,X as vt,Y as Nt,T as Ct,a as gs,b as ps,c as bs,d as fs,S as Me,e as js,L as ws,A as kt,f as St,V as ys,g as vs,h as Ns}from"./index-B1JDbTFW.js";class Cs extends c.Component{constructor(x){super(x),this.state={hasError:!1,error:null}}static getDerivedStateFromError(x){return{hasError:!0,error:x}}componentDidCatch(x,z){console.error("Uncaught error:",x,z)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl border border-red-200 max-w-lg w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Application Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"A critical error stopped the dashboard."}),e.jsx("div",{className:"text-left bg-gray-100 p-2 rounded text-xs text-red-800 font-mono mb-4 overflow-auto max-h-32",children:this.state.error&&this.state.error.toString()}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white font-bold py-2 px-6 rounded hover:bg-red-700 transition",children:"Reload Page"})]})}):this.props.children}}const ks="",Ss="",qe=v=>decodeURIComponent(v).split("/").map(z=>z.replace(/ /g,"%20").replace(/#/g,"%23")).join("/"),Tt=v=>{if(!v||typeof v!="string")return null;const x=v.trim(),z=x.match(/^(.+?)\s+ONEAR\/(\d+)\s+(.+)$/i);if(z)return{type:"onear",terms:[z[1].trim(),z[3].trim()],distance:parseInt(z[2],10),ordered:!0,excluded:[]};const J=x.match(/^(.+?)\s+(?:NEAR\/(\d+)|~(\d+)|AROUND\((\d+)\))\s+(.+)$/i);if(J)return{type:"near",terms:[J[1].trim(),J[5].trim()],distance:parseInt(J[2]||J[3]||J[4],10),excluded:[]};const G=x.match(/^(.+?)\s+(?:\/s|SENTENCE)\s+(.+)$/i);if(G)return{type:"sentence",terms:[G[1].trim(),G[2].trim()],excluded:[]};const q=x.match(/^(.+?)\s+(?:\/p|PARAGRAPH)\s+(.+)$/i);if(q)return{type:"paragraph",terms:[q[1].trim(),q[2].trim()],excluded:[]};const Re=x.match(/^"([^"]+)"$/);if(Re)return{type:"phrase",phrase:Re[1],excluded:[]};if(x.includes("(?=")&&x.includes(".*")){const j=[...x.matchAll(/\(\?=\.\*(?:\\b)?(\w+)(?:\\b)?\)/g)].map(He=>He[1]).filter(Boolean);if(j.length>=2)return{type:"and",required:j,excluded:[]}}let C=[],b=x;if(/\sNOT\s/i.test(b)){const f=b.split(/\s+NOT\s+/i);b=f[0].trim(),C=f.slice(1).map(j=>j.trim()).filter(Boolean)}const re=[...b.matchAll(/(?:^|\s)[-!](\w+)/g)];if(re.length>0&&(C=[...C,...re.map(f=>f[1])],b=b.replace(/(?:^|\s)[-!]\w+/g," ").trim()),/\sOR\s/i.test(b)){const f=b.split(/\s+OR\s+/i).map(j=>j.trim()).filter(Boolean);if(f.length>=2||C.length>0)return{type:"or",required:f,excluded:C}}if(/\s*\|\s*/.test(b)){const f=b.split(/\s*\|\s*/).map(j=>j.trim()).filter(Boolean);if(f.length>=2||C.length>0)return{type:"or",required:f,excluded:C}}if(/\sAND\s/i.test(b)){const f=b.split(/\s+AND\s+/i).map(j=>j.trim()).filter(Boolean);if(f.length>=2||C.length>0)return{type:"and",required:f,excluded:C}}if(/^\+\S/.test(b)&&b.includes(" +")){const f=b.split(/\s+/).filter(j=>j.startsWith("+")).map(j=>j.slice(1).trim()).filter(Boolean);if(f.length>=2||C.length>0)return{type:"and",required:f,excluded:C}}if(/\s*&\s*/.test(b)&&!b.includes("|")){const f=b.split(/\s*&\s*/).map(j=>j.trim()).filter(Boolean);if(f.length>=2||C.length>0)return{type:"and",required:f,excluded:C}}return C.length>0&&b.trim()?{type:"and",required:[b.trim()],excluded:C}:null},Ts=/\b(Genesis|Exodus|Leviticus|Numbers|Deuteronomy|Joshua|Judges|Ruth|(?:1|2|I|II)\s*Samuel|(?:1|2|I|II)\s*Kings|(?:1|2|I|II)\s*Chronicles|Ezra|Nehemiah|Esther|Job|Psalms?|Proverbs|Ecclesiastes|Song\s*of\s*Solomon|Isaiah|Jeremiah|Lamentations|Ezekiel|Daniel|Hosea|Joel|Amos|Obadiah|Jonah|Micah|Nahum|Habakkuk|Zephaniah|Haggai|Zechariah|Malachi|Matthew|Mark|Luke|John|Acts|Romans|(?:1|2|I|II)\s*Corinthians|Galatians|Ephesians|Philippians|Colossians|(?:1|2|I|II)\s*Thessalonians|(?:1|2|I|II)\s*Timothy|Titus|Philemon|Hebrews|James|(?:1|2|I|II)\s*Peter|(?:1|2|3|I|II|III)\s*John|Jude|Revelation|Rev\.?|Gen\.?|Ex\.?|Lev\.?|Num\.?|Deut\.?|Josh\.?|Judg\.?|(?:1|2)\s*Sam\.?|(?:1|2)\s*Kgs\.?|(?:1|2)\s*Chr\.?|Neh\.?|Esth\.?|Ps\.?|Prov\.?|Eccl\.?|Isa\.?|Jer\.?|Lam\.?|Ezek\.?|Dan\.?|Hos\.?|Obad\.?|Mic\.?|Nah\.?|Hab\.?|Zeph\.?|Hag\.?|Zech\.?|Mal\.?|Matt\.?|Mk\.?|Lk\.?|Jn\.?|Rom\.?|(?:1|2)\s*Cor\.?|Gal\.?|Eph\.?|Phil\.?|Col\.?|(?:1|2)\s*Thess\.?|(?:1|2)\s*Tim\.?|Tit\.?|Phlm\.?|Heb\.?|Jas\.?|(?:1|2)\s*Pet\.?|(?:1|2|3)\s*Jn\.?|Rev\.?)\s*(\d+)(?::(\d+)(?:-(\d+))?)?\b/gi,$s=v=>{const x=v.toLowerCase().replace(/\./g,"").replace(/\s+/g," ").trim();return{gen:"Genesis",genesis:"Genesis",ex:"Exodus",exodus:"Exodus",lev:"Leviticus",leviticus:"Leviticus",num:"Numbers",numbers:"Numbers",deut:"Deuteronomy",deuteronomy:"Deuteronomy",josh:"Joshua",joshua:"Joshua",judg:"Judges",judges:"Judges",ruth:"Ruth","1 sam":"1 Samuel","2 sam":"2 Samuel","i samuel":"1 Samuel","ii samuel":"2 Samuel","1 samuel":"1 Samuel","2 samuel":"2 Samuel","1 kgs":"1 Kings","2 kgs":"2 Kings","1 kings":"1 Kings","2 kings":"2 Kings","i kings":"1 Kings","ii kings":"2 Kings","1 chr":"1 Chronicles","2 chr":"2 Chronicles","1 chronicles":"1 Chronicles","2 chronicles":"2 Chronicles",ezra:"Ezra",neh:"Nehemiah",nehemiah:"Nehemiah",esth:"Esther",esther:"Esther",job:"Job",ps:"Psalms",psalm:"Psalms",psalms:"Psalms",prov:"Proverbs",proverbs:"Proverbs",eccl:"Ecclesiastes",ecclesiastes:"Ecclesiastes","song of solomon":"Song of Solomon",isa:"Isaiah",isaiah:"Isaiah",jer:"Jeremiah",jeremiah:"Jeremiah",lam:"Lamentations",lamentations:"Lamentations",ezek:"Ezekiel",ezekiel:"Ezekiel",dan:"Daniel",daniel:"Daniel",hos:"Hosea",hosea:"Hosea",joel:"Joel",amos:"Amos",obad:"Obadiah",obadiah:"Obadiah",jonah:"Jonah",mic:"Micah",micah:"Micah",nah:"Nahum",nahum:"Nahum",hab:"Habakkuk",habakkuk:"Habakkuk",zeph:"Zephaniah",zephaniah:"Zephaniah",hag:"Haggai",haggai:"Haggai",zech:"Zechariah",zechariah:"Zechariah",mal:"Malachi",malachi:"Malachi",matt:"Matthew",matthew:"Matthew",mk:"Mark",mark:"Mark",lk:"Luke",luke:"Luke",jn:"John",john:"John",acts:"Acts",rom:"Romans",romans:"Romans","1 cor":"1 Corinthians","2 cor":"2 Corinthians","1 corinthians":"1 Corinthians","2 corinthians":"2 Corinthians",gal:"Galatians",galatians:"Galatians",eph:"Ephesians",ephesians:"Ephesians",phil:"Philippians",philippians:"Philippians",col:"Colossians",colossians:"Colossians","1 thess":"1 Thessalonians","2 thess":"2 Thessalonians","1 thessalonians":"1 Thessalonians","2 thessalonians":"2 Thessalonians","1 tim":"1 Timothy","2 tim":"2 Timothy","1 timothy":"1 Timothy","2 timothy":"2 Timothy",tit:"Titus",titus:"Titus",phlm:"Philemon",philemon:"Philemon",heb:"Hebrews",hebrews:"Hebrews",jas:"James",james:"James","1 pet":"1 Peter","2 pet":"2 Peter","1 peter":"1 Peter","2 peter":"2 Peter","1 jn":"1 John","2 jn":"2 John","3 jn":"3 John","1 john":"1 John","2 john":"2 John","3 john":"3 John","i john":"1 John","ii john":"2 John","iii john":"3 John",jude:"Jude",rev:"Revelation",revelation:"Revelation"}[x]||v.charAt(0).toUpperCase()+v.slice(1)},Ms=v=>/[*?]/.test(v),Rs=v=>{let x=v.replace(/[.+^${}()|[\]\\]/g,"\\$&");return x=x.replace(/\*/g,"\\S*").replace(/\?/g,"."),x},Ls=v=>{const x=v.trim();return x.startsWith('"')&&x.endsWith('"')||x.startsWith("'")&&x.endsWith("'")?x.slice(1,-1):x},de=(v,x=!0)=>{const z=Ls(v);if(Ms(z)){const q=Rs(z);return x?new RegExp(`\\b(${q})\\b`,"gi"):new RegExp(`(${q})`,"gi")}let J=z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");J=J.replace(/'/g,"[''']?");const G=J.replace(/\s+/g,"\\s+");return x?new RegExp(`\\b(${G})\\b`,"gi"):new RegExp(`(${G})`,"gi")};function Ds({onSwitchToMain:v}){const[x,z]=c.useState([]),[J,G]=c.useState(!0),[q,Re]=c.useState(null),[C,b]=c.useState("wmb_api/"),[re,f]=c.useState(0),[j,He]=c.useState(0),[Xe,$t]=c.useState(null),[Qe,Mt]=c.useState(""),[et,Rt]=c.useState(0),[Lt,Et]=c.useState(0),[At,Dt]=c.useState({}),[tt,Pt]=c.useState([]),[w,Le]=c.useState(ks),[oe,Ee]=c.useState(Ss),[me,Ae]=c.useState(null),[zt,fe]=c.useState([]),[st,he]=c.useState(!1),[Wt,ee]=c.useState({status:"",percent:0}),at=c.useRef({term:null,regex:null}),[Ot,S]=c.useState(""),[Es,De]=c.useTransition(),[je,nt]=c.useState([]),[we,rt]=c.useState([]),[te,ot]=c.useState([]),[Pe,it]=c.useState([]),ye=c.useCallback(t=>De(()=>nt(t)),[]),xe=c.useCallback(t=>De(()=>rt(t)),[]),ve=c.useCallback(t=>De(()=>ot(t)),[]),lt=c.useCallback(t=>De(()=>it(t)),[]),[Fe,Bt]=c.useState(26),[Ne,It]=c.useState("dashboard"),[ct,Jt]=c.useState(null),[ie,I]=c.useState(null),[Ht,H]=c.useState(0),[se,Ft]=c.useState(!0),[ze,dt]=c.useState("bars"),[Ce,We]=c.useState(null),[Oe,_e]=c.useState("grid"),[_t,Ut]=c.useState(new Set),[Vt,mt]=c.useState({}),[Kt,Zt]=c.useState({}),[Be,ke]=c.useState(new Set(["Seven Church Ages","Seven Seals"])),[k,Se]=c.useState(null),[ht,xt]=c.useState({}),[Ie,ut]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("wmb-search-history")||"[]")}catch{return[]}});c.useEffect(()=>{localStorage.setItem("wmb-search-history",JSON.stringify(Ie.slice(0,20)))},[Ie]);const Yt=c.useCallback(t=>{!t||t.trim().length<2||ut(a=>[{term:t.trim(),timestamp:Date.now()},...a.filter(s=>s.term!==t.trim())].slice(0,20))},[]),[ue,Gt]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("wmb-reading-progress")||"{}")}catch{return{}}});c.useEffect(()=>{localStorage.setItem("wmb-reading-progress",JSON.stringify(ue))},[ue]);const qt=c.useCallback((t,a)=>{Gt(s=>({...s,[t]:{position:a,timestamp:Date.now()}}))},[]);c.useCallback(t=>ue[t],[ue]);const[Te,gt]=c.useState(!1),[Z,Xt]=c.useState(null),ge=c.useCallback(async(t,a,s=null)=>{if(!t||t.length===0){alert("No transcripts available to download");return}const r=t.filter(n=>n.path);if(r.length===0){alert("No downloadable transcripts found");return}Se({current:0,total:r.length,year:s});try{const n=new xs,i="/wmbmentions.github.io/";let o=0;for(let h=0;h<r.length;h++){const p=r[h];Se({current:h+1,total:r.length,year:s});try{const $=`${i}${qe(p.path)}`,N=await fetch($);if(N.ok){const y=await N.text(),g=p.path.split("/").pop();n.file(g,y),o++}}catch($){console.warn(`Failed to fetch ${p.path}:`,$)}}if(o===0){alert("Could not download any transcripts. Please try downloading from Living Word Broadcast."),Se(null);return}const d=await n.generateAsync({type:"blob"}),l=URL.createObjectURL(d),m=document.createElement("a");m.href=l,m.download=a,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(l),Se(null)}catch(n){console.error("Error creating zip:",n),alert("Error creating download. Please try again or download from Living Word Broadcast."),Se(null)}},[]),Ue=c.useMemo(()=>({"Seven Church Ages":{dateCodes:["60-1205","60-1206","60-1207","60-1208","60-1209","60-1210","60-1211E"],color:"indigo",description:"December 5-11, 1960 - Branham Tabernacle"},"Seven Seals":{dateCodes:["63-0317E","63-0318","63-0319","63-0320","63-0321","63-0322","63-0323","63-0324E"],color:"amber",description:"March 17-24, 1963 - Branham Tabernacle"}}),[]),Qt=c.useCallback(t=>{const a=Ue[t];return a?x.filter(s=>a.dateCodes.some(r=>s.dateCode===r||s.id?.startsWith(r))).sort((s,r)=>(s.date||"").localeCompare(r.date||"")):[]},[x,Ue]),es=c.useCallback((t,a=5)=>{if(!t||!x.length)return[];const s=[],r=new Date(t.timestamp);return x.forEach(n=>{if(n.id===t.id)return;let i=0;if(t.topics&&n.topics){const l=t.topics.filter(m=>n.topics.includes(m)).length;i+=l*10}t.venue&&n.venue===t.venue&&(i+=5);const o=new Date(n.timestamp),d=Math.abs((r-o)/(1e3*60*60*24));d<=7?i+=8:d<=30?i+=4:d<=90&&(i+=2),i>0&&s.push({...n,relatedScore:i})}),s.sort((n,i)=>i.relatedScore-n.relatedScore).slice(0,a)},[x]),ts=c.useCallback(async()=>{if(Te)return;gt(!0);const t=new Map,a=50;try{for(let r=0;r<re;r+=a){const n=[];for(let o=r;o<Math.min(r+a,re);o++)n.push(fetch(`${C}text_chunk_${o}.json`).then(d=>d.ok?d.json():[]).catch(()=>[]));const i=await Promise.all(n);for(const o of i)for(const d of o){let l;const m=new RegExp(Ts.source,"gi");for(;(l=m.exec(d.text))!==null;){const h=$s(l[1]),p=l[2],$=l[3]||"",N=$?`${h} ${p}:${$}`:`${h} ${p}`;t.has(h)||t.set(h,{count:0,refs:new Map});const y=t.get(h);y.count++,y.refs.has(N)||y.refs.set(N,{count:0,sermons:new Set}),y.refs.get(N).count++,y.refs.get(N).sermons.add(d.id)}}await new Promise(o=>setTimeout(o,10))}const s=Array.from(t.entries()).map(([r,n])=>({book:r,count:n.count,refs:Array.from(n.refs.entries()).map(([i,o])=>({ref:i,count:o.count,sermons:Array.from(o.sermons)})).sort((i,o)=>o.count-i.count).slice(0,10)})).sort((r,n)=>n.count-r.count);Xt(s)}catch(s){console.error("Scripture scan failed:",s)}gt(!1)},[re,C,Te]),[F,Ve]=c.useState({date:"",venue:"",title:"",topic:""}),[le,Ke]=c.useState({key:"timestamp",direction:"desc"}),[pe,Ze]=c.useState(null),[pt,ss]=c.useState({x:0,y:0}),as=c.useRef(null);c.useEffect(()=>{Ke(me!==null?{key:"mentionCount",direction:"desc"}:{key:"timestamp",direction:"desc"})},[me]),c.useEffect(()=>{const t=a=>{a.key==="Escape"&&ie&&I(null)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[ie]),c.useEffect(()=>{let t=!0;return(async()=>{try{const s=["wmb_api/metadata.json","/wmbmentions.github.io/wmb_api/metadata.json","https://raw.githubusercontent.com/messageanalytics/wmbmentions.github.io/main/docs/wmb_api/metadata.json"];let r=null,n="wmb_api/";for(const h of s)try{if(r=await fetch(h),r.ok){n=h.includes("raw.githubusercontent")?"https://raw.githubusercontent.com/messageanalytics/wmbmentions.github.io/main/docs/wmb_api/":h.includes("/wmbmentions.github.io/")?"/wmbmentions.github.io/wmb_api/":"wmb_api/";break}}catch{}if(!r||!r.ok)throw new Error("WMB Metadata not found.");const i=await r.json();if(!t)return;const o=i.generated||"Unknown";$t(o),f(i.totalChunks||0),He(i.totalSermons||0),Mt(i.yearRange||""),Rt(i.totalWords||0),Et(i.totalDurationMinutes||0),Dt(i.topicCounts||{}),Pt(i.venues||[]),b(n);const d=(i.sermons||[]).map(h=>{const p=h.wordCount/Ge/60;return{...h,durationHrs:p>0?p:.5,mentionCount:0,mentionsPerHour:0}});z(d),nt([...new Set(d.map(h=>h.title))].filter(Boolean));const l=[...new Set(d.map(h=>h.year))].filter(h=>h!=="Unknown").sort();rt(l),ot([...new Set(d.map(h=>h.venue))].filter(Boolean));const m=[...new Set(d.flatMap(h=>h.topics||[]))];it(m),G(!1)}catch(s){console.error("Failed to load WMB data:",s),t&&(Re(s.message),G(!1))}})(),()=>{t=!1}},[]);const R=c.useMemo(()=>({titles:[...new Set(x.map(t=>t.title))].filter(Boolean).sort(),years:[...new Set(x.map(t=>t.year))].filter(t=>t!=="Unknown").sort(),venues:[...new Set(x.map(t=>t.venue))].filter(Boolean).sort(),topics:[...new Set(x.flatMap(t=>t.topics||[]))].sort()}),[x]),bt=c.useMemo(()=>me===null?x:x.map(t=>{const a=me.get(t.id)||0;return{...t,mentionCount:a,mentionsPerHour:t.durationHrs>0?parseFloat((a/t.durationHrs).toFixed(1)):0,searchTerm:oe}}),[x,me,oe]),ft=c.useMemo(()=>({titles:new Set(je),years:new Set(we),venues:new Set(te),topics:new Set(Pe)}),[je,we,te,Pe]),L=c.useMemo(()=>{const{titles:t,years:a,venues:s,topics:r}=ft;return bt.filter(n=>{const i=!r.size||n.topics&&n.topics.some(o=>r.has(o));return t.has(n.title)&&a.has(n.year)&&s.has(n.venue)&&i})},[bt,ft]),Y=c.useMemo(()=>{if(!L.length)return null;const t=L.length,a=L.reduce((n,i)=>n+(i.mentionCount||0),0);let s=0,r=null;return L.forEach(n=>{(n.mentionCount||0)>s&&(s=n.mentionCount,r=n)}),{totalSermons:t,totalMentions:a,maxMentions:s,peakSermon:r,avg:t>0?(a/t).toFixed(1):"0",totalWords:L.reduce((n,i)=>n+(i.wordCount||0),0),totalDuration:L.reduce((n,i)=>n+(i.duration||0),0)}},[L]),Ye=c.useMemo(()=>L.length?[...L].sort((a,s)=>a.timestamp-s.timestamp).map(a=>({timestamp:a.timestamp,mentionCount:a.mentionCount||0,title:a.title,...a})):[],[L]),ce=c.useMemo(()=>{if(!Ye.length)return[];const t=new Map;Ye.forEach(r=>{const n=new Date(r.timestamp);n.setHours(0,0,0,0),n.setDate(n.getDate()-n.getDay());const i=n.getTime();t.has(i)||t.set(i,{timestamp:i,mentionCount:0,count:0,sermons:[]});const o=t.get(i);o.mentionCount+=r.mentionCount||0,o.count++,o.sermons.push(r)});const a=Array.from(t.values()).sort((r,n)=>r.timestamp-n.timestamp),s=Fe;return a.forEach((r,n)=>{const i=Math.max(0,n-s+1),o=a.slice(i,n+1),d=o.reduce((m,h)=>m+h.mentionCount,0)/o.length,l=o.reduce((m,h)=>m+h.count,0)/o.length;r.rollingAvg=parseFloat(d.toFixed(1)),r.volumeRollingAvg=parseFloat(l.toFixed(1))}),a},[Ye,Fe]),ns=c.useMemo(()=>ce.length?[ce[0].timestamp,ce[ce.length-1].timestamp]:["auto","auto"],[ce]),rs=t=>new Date(t).toLocaleDateString(void 0,{month:"short",year:"2-digit"}),X=c.useMemo(()=>{if(!L.length)return[];const t=new Map;L.forEach(s=>{const r=s.venue||"Unknown";t.has(r)||t.set(r,{count:0,totalWords:0,years:new Set});const n=t.get(r);n.count++,n.totalWords+=s.wordCount||0,s.date&&n.years.add(s.date.slice(0,4))});const a=L.length;return Array.from(t.entries()).map(([s,r])=>{const n=Array.from(r.years).sort();return{venue:s,count:r.count,percent:(r.count/a*100).toFixed(1),totalWords:r.totalWords,dateRange:n.length>0?`${n[0]} - ${n[n.length-1]}`:"N/A"}}).sort((s,r)=>r.count-s.count)},[L]),Q=c.useMemo(()=>{if(!x.length)return{venues:[],years:[],data:new Map,maxCount:0};const t=new Map,a=new Set,s=new Map;for(const o of x){const d=o.venue||"Unknown",l=o.year||"Unknown";a.add(l);const m=`${d}|${l}`;t.set(m,(t.get(m)||0)+1),s.set(d,(s.get(d)||0)+1)}const r=Array.from(s.entries()).sort((o,d)=>d[1]-o[1]).map(([o])=>o),n=Array.from(a).filter(o=>o!=="Unknown").sort();let i=0;for(const o of t.values())o>i&&(i=o);return{venues:r,years:n,data:t,maxCount:i,venueTotals:s}},[x]),os=c.useMemo(()=>{const t=new Map;return x.forEach(a=>{const s=a.year||"Unknown";t.has(s)||t.set(s,[]),t.get(s).push(a)}),Array.from(t.entries()).map(([a,s])=>({year:a,sermons:s.sort((r,n)=>(r.date||"").localeCompare(n.date||"")),count:s.length,totalWords:s.reduce((r,n)=>r+(n.wordCount||0),0)})).sort((a,s)=>s.year.localeCompare(a.year))},[x]),T=async(t,a,s=null,r={})=>{if(!t&&!s){Ae(null),Le(""),Ee(""),fe([]);return}Yt(t||s),at.current={term:t,rawRegex:s,variations:a,...r},he(!0),ee({status:"Preparing search...",percent:0}),fe([]),await is(t,a,s,r)},is=async(t,a,s=null,r={})=>{const{wholeWords:n=!0}=r;try{const o=Object.create(null),d=t&&Tt(t)?t:s||t||"",l=Tt(d);let m;if(l){const{type:g,required:E,excluded:V,terms:ae,distance:A,ordered:B,phrase:K}=l;if(g==="or"){const D=E.map(W=>de(W,n));m=W=>{for(const O of V)if(de(O,n).test(W))return 0;let P=0;const U=[];for(let O=0;O<D.length;O++){D[O].lastIndex=0;const M=W.match(D[O]);if(M&&M.length>0){P+=M.length;for(const be of M)U.push(be.toLowerCase())}}return{count:P,matched:U}}}else if(g==="and"){const D=E.map(W=>de(W,n));m=W=>{for(const O of V)if(de(O,n).test(W))return 0;let P=0;const U=[];for(let O=0;O<D.length;O++){D[O].lastIndex=0;const M=W.match(D[O]);if(!M||M.length===0)return 0;P+=M.length;for(const be of M)U.push(be.toLowerCase())}return{count:P,matched:U}}}else if(g==="phrase"){const D=n?new RegExp(`\\b(${K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})\\b`,"gi"):new RegExp(`(${K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");m=W=>{const P=W.match(D);return P?{count:P.length,matched:P.map(U=>U.toLowerCase())}:0}}else if(g==="near"||g==="onear"){const[D,W]=ae,P=de(D,n),U=de(W,n);m=O=>{const M=O.split(/\s+/);let be=0;const jt=[];for(let ne=0;ne<M.length;ne++)if(P.lastIndex=0,P.test(M[ne])){const ms=B?ne+1:Math.max(0,ne-A),hs=Math.min(M.length,ne+A+1);for(let $e=ms;$e<hs;$e++)$e!==ne&&(U.lastIndex=0,U.test(M[$e])&&(be++,jt.push(M[ne].toLowerCase(),M[$e].toLowerCase())))}return{count:be,matched:[...new Set(jt)]}}}else{const D=de(d,n);m=W=>{const P=W.match(D);return P?{count:P.length,matched:P.map(U=>U.toLowerCase())}:0}}}else if(s&&s.trim()){let g;try{g=n?new RegExp(`\\b(${s})\\b`,"gi"):new RegExp(`(${s})`,"gi")}catch(E){ee({status:`Invalid regex: ${E.message}`,percent:0,error:!0}),he(!1);return}m=E=>{g.lastIndex=0;const V=E.match(g);return V?{count:V.length,matched:V.map(ae=>ae.toLowerCase())}:0}}else{const g=A=>(""+A).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let E=[t].filter(Boolean);if(a){const A=Array.isArray(a)?a:a.split(",").map(B=>B.trim()).filter(Boolean);E=[...E,...A.filter(Boolean)]}if(E.length===0){he(!1);return}const V=E.map(g).join("|"),ae=n?new RegExp(`\\b(${V})\\b`,"gi"):new RegExp(`(${V})`,"gi");m=A=>{ae.lastIndex=0;const B=A.match(ae);return B?{count:B.length,matched:B.map(K=>K.toLowerCase())}:0}}const h=Object.create(null),p=re||0;if(!p||p===0){ee({status:"No data available",percent:0,error:!0}),he(!1);return}ee({status:"Searching transcripts...",percent:10});let $=0;for(let g=0;g<p;g+=50){const E=[];for(let A=g;A<Math.min(g+50,p);A++)E.push(fetch(`${C}text_chunk_${A}.json`).then(B=>B.ok?B.json():[]).catch(()=>[]));const V=await Promise.all(E);for(const A of V){for(const B of A)try{const K=m(B.text);if(K&&K.count>0&&(h[B.id]=(h[B.id]||0)+K.count,K.matched))for(const D of K.matched)o[D]=(o[D]||0)+1}catch{}$++}const ae=Math.round($/p*100);ee({status:"Searching transcripts...",percent:10+Math.round(ae*.85),detail:`${$} of ${p} chunks`}),await new Promise(A=>setTimeout(A,5))}ee({status:"Counting matches...",percent:95});const N=new Map;for(const g in h)Object.hasOwn(h,g)&&N.set(g,h[g]);Ae(N),Le(t),Ee(s&&s.trim()?s:d);const y=[];for(const g in o)Object.hasOwn(o,g)&&y.push({term:g,count:o[g]});y.sort((g,E)=>E.count-g.count),fe(y.slice(0,50)),he(!1),ee({status:"Done!",percent:100})}catch(i){console.error("Search failed",i),he(!1),ee({status:"Search failed",percent:0,error:!0})}},_=c.useMemo(()=>{let t=[...L];if(F.date&&(t=t.filter(a=>a.date.includes(F.date))),F.venue&&(t=t.filter(a=>a.venue&&a.venue.toLowerCase().includes(F.venue.toLowerCase()))),F.title&&(t=t.filter(a=>a.title.toLowerCase().includes(F.title.toLowerCase()))),F.search){const a=F.search.toLowerCase();t=t.filter(s=>(s.title||"").toLowerCase().includes(a)||(s.venue||"").toLowerCase().includes(a)||(s.location||"").toLowerCase().includes(a)||(s.date||"").toLowerCase().includes(a))}return le.key&&t.sort((a,s)=>{let r=a[le.key],n=s[le.key];return typeof r=="string"&&(r=r.toLowerCase()),typeof n=="string"&&(n=n.toLowerCase()),r<n?le.direction==="asc"?-1:1:r>n?le.direction==="asc"?1:-1:0}),t},[L,F,le]),ls=c.useCallback(()=>{if(!_||_.length===0){alert("No results to export");return}const t=["Date","Title","Venue","Words","Matches","Duration (min)"],a=_.map(o=>[o.date||"",`"${(o.title||"").replace(/"/g,'""')}"`,`"${(o.venue||"").replace(/"/g,'""')}"`,o.wordCount||0,o.mentionCount||0,Math.round((o.wordCount||0)/Ge)]),s=[t.join(","),...a.map(o=>o.join(","))].join(`
`),r=new Blob([s],{type:"text/csv"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`wmb_search_results_${(w||"all").replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,i.click(),URL.revokeObjectURL(n)},[_,w]),cs=()=>{ye(R.titles),xe(R.years),ve(R.venues),lt(R.topics)},ds=je.length!==R.titles.length||we.length!==R.years.length||te.length!==R.venues.length||Pe.length!==R.topics.length;return J?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-100",children:e.jsxs("div",{className:"text-center p-8 bg-white rounded-2xl shadow-xl border border-amber-200 max-w-md w-full mx-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-amber-800 mb-2",children:"Loading Branham Archive"}),e.jsx("p",{className:"text-amber-600 text-sm",children:"1,181 sermons â€¢ 17.5M words â€¢ 1947-1965"})]})}):q?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl border border-red-200 max-w-lg w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Failed to Load"}),e.jsx("p",{className:"text-gray-600 mb-4",children:q}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white font-bold py-2 px-6 rounded hover:bg-red-700 transition",children:"Retry"})]})}):e.jsx(Cs,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-700 to-orange-600 text-white shadow-lg sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur p-2 rounded-lg shadow-lg flex-shrink-0",children:e.jsx(u,{name:"book",className:"text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"font-bold text-base md:text-lg text-white leading-tight truncate",children:"William Branham Sermon Archive"}),e.jsxs("p",{className:"text-xs text-amber-100 truncate",children:[Qe," â€¢ ",j.toLocaleString()," sermons â€¢ ",(et/1e6).toFixed(1),"M words"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3 md:gap-4 w-full md:w-auto",children:[Xe&&e.jsxs("div",{className:"text-xs text-amber-200 text-center md:text-right",children:["Data: ",Xe]}),e.jsx("div",{className:"flex bg-white/10 backdrop-blur p-1 rounded-lg w-full md:w-auto",children:["dashboard","data","about"].map(t=>e.jsx("button",{onClick:()=>It(t),className:`px-3 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-medium transition capitalize flex-1 md:flex-none ${Ne===t?"bg-white text-amber-700 shadow-sm":"text-amber-100 hover:text-white hover:bg-white/10"}`,children:t},t))}),v&&e.jsx("button",{onClick:v,className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-md text-xs font-medium text-amber-100 hover:text-white transition",children:"â† Back to Main"})]})]})}),e.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 text-amber-800 text-xs text-center py-2 px-4",children:[e.jsx("span",{className:"font-bold",children:"Source:"})," Transcripts from ",e.jsx("a",{href:"https://www.livingwordbroadcast.org/wbtextindex",target:"_blank",rel:"noopener noreferrer",className:"text-amber-700 hover:text-amber-900 underline",children:"Living Word Broadcast"})," â€¢ Click any sermon to read the full transcript â€¢ ",e.jsx("kbd",{className:"px-1 py-0.5 bg-amber-200 rounded text-xs",children:"âŒ˜K"})," to search"]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[Ne==="dashboard"&&e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm",children:[e.jsx(u,{name:"filter",size:16})," Filters"]}),e.jsx("div",{className:"flex items-center gap-2",children:ds&&e.jsx("button",{onClick:cs,className:"text-xs text-amber-600 hover:text-amber-800 font-medium",children:"Clear all filters"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(Je,{label:"Years",options:R.years,selected:we,onChange:xe}),e.jsx(Je,{label:"Venues",options:R.venues,selected:te,onChange:ve}),e.jsx(Je,{label:"Topics",options:R.topics,selected:Pe,onChange:lt}),e.jsx(Je,{label:"Titles",options:R.titles,selected:je,onChange:ye})]}),Object.keys(ue).length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 flex items-center gap-1 mb-2",children:[e.jsx(u,{name:"clock",size:14,className:"text-blue-500"})," Continue Reading"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(ue).sort((t,a)=>a[1].timestamp-t[1].timestamp).slice(0,5).map(([t,a])=>{const s=x.find(r=>r.id===t);return s?e.jsxs("button",{onClick:()=>{I({...s,resumePosition:a.position}),H(0)},className:"px-2 py-1 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded text-xs text-blue-800 flex items-center gap-1 max-w-xs",children:[e.jsx(u,{name:"arrowRight",size:12}),e.jsx("span",{className:"truncate",children:s.title}),e.jsxs("span",{className:"text-blue-500",children:["(",Math.round(a.position*100),"%)"]})]},t):null})})]})]}),Ne==="dashboard"&&Y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm mb-6",children:[e.jsxs("button",{onClick:()=>Ft(!se),className:`w-full flex items-center justify-between p-4 transition-colors ${se?"bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{name:se?"chevronRight":"chevronDown",size:18,className:se?"text-amber-600":"text-gray-500"}),e.jsxs("h3",{className:`font-bold ${se?"text-amber-800":"text-gray-800"}`,children:[e.jsx(u,{name:"barChart",className:"inline mr-1",size:16})," Sermons by Venue"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",X.length," venues)"]})]}),e.jsx("span",{className:`text-sm font-medium ${se?"text-amber-600 bg-amber-100 px-3 py-1 rounded-full":"text-xs text-gray-400"}`,children:se?"â–¶ Click to view":"Click to collapse"})]}),!se&&e.jsxs("div",{className:"p-4 pt-2",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>dt("bars"),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${ze==="bars"?"bg-amber-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"ðŸ“Š Bar Chart"}),e.jsx("button",{onClick:()=>dt("heatmap"),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${ze==="heatmap"?"bg-amber-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"ðŸ—“ï¸ Venue Ã— Year"})]}),ze==="bars"&&X.length>0&&(()=>{const t=Math.max(...X.map(r=>r.count)),a=Math.ceil(t/50)*50,s=[];for(let r=0;r<=a;r+=50)s.push(r);return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Click a bar to filter sermons by that venue. Darker bars = more sermons."}),e.jsx("div",{style:{height:Math.max(400,X.length*20)},children:e.jsx(wt,{width:"100%",height:"100%",children:e.jsxs(us,{data:X,layout:"vertical",margin:{top:10,right:30,left:5,bottom:5},barSize:14,children:[e.jsx(yt,{strokeDasharray:"3 3",horizontal:!1}),e.jsx(vt,{type:"number",tickFormatter:r=>r.toLocaleString(),orientation:"top",axisLine:!1,tickLine:!1,tick:{fontSize:10},ticks:s,domain:[0,a]}),e.jsx(Nt,{type:"category",dataKey:"venue",width:typeof window<"u"&&window.innerWidth<640?120:200,tick:{fontSize:typeof window<"u"&&window.innerWidth<640?8:10},interval:0}),e.jsx(Ct,{content:({active:r,payload:n})=>{if(!r||!n||!n.length)return null;const i=n[0].payload;return e.jsxs("div",{className:"bg-white border rounded-lg shadow-lg p-3 text-sm max-w-xs",children:[e.jsx("p",{className:"font-bold text-gray-800 mb-2",children:i.venue}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-amber-600",children:["ðŸ“Š Sermons: ",e.jsx("span",{className:"font-semibold",children:i.count.toLocaleString()})," ",e.jsxs("span",{className:"text-gray-400",children:["(",i.percent,"%)"]})]}),e.jsxs("p",{className:"text-gray-600",children:["ðŸ“… Years: ",i.dateRange]}),e.jsxs("p",{className:"text-blue-600",children:["ðŸ“ Words: ",e.jsx("span",{className:"font-semibold",children:i.totalWords.toLocaleString()})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2 italic",children:"Click to browse sermons"})]})}}),e.jsx(gs,{dataKey:"count",radius:[0,4,4,0],children:X.map((r,n)=>{const i=1-n/(X.length-1||1),o=Math.round(254+-74*i),d=Math.round(243+-160*i),l=Math.round(199+-190*i),m=`rgb(${o},${d},${l})`,h=Ce===r.venue;return e.jsx(ps,{fill:h?"#d97706":m,stroke:h?"#92400e":"none",strokeWidth:h?2:0,style:{cursor:"pointer"},onClick:()=>We(r.venue)},r.venue)})})]})})})]})})(),ze==="heatmap"&&Q&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Sermon distribution by venue and year. Darker = more sermons. Click to filter."}),e.jsxs("div",{className:"grid gap-px bg-gray-200",style:{gridTemplateColumns:`200px repeat(${Q.years.length}, minmax(32px, 1fr))`,minWidth:`${200+Q.years.length*36}px`},children:[e.jsx("div",{className:"bg-gray-50 p-1.5 text-xs font-bold text-gray-700 sticky left-0 z-10",children:"Venue"}),Q.years.map(t=>e.jsx("div",{className:"bg-gray-50 p-1.5 text-xs font-bold text-gray-700 text-center",children:t.toString().slice(-2)},t)),Q.venues.map((t,a)=>e.jsxs(bs.Fragment,{children:[e.jsx("div",{className:`bg-white p-1.5 text-xs truncate sticky left-0 z-10 cursor-pointer hover:bg-amber-50 ${te.includes(t)?"bg-amber-100 font-semibold":""}`,title:`${t} (${Q.venueTotals.get(t)||0} sermons)`,onClick:()=>{te.includes(t)?ve(te.filter(s=>s!==t)):ve([...te,t])},children:t}),Q.years.map(s=>{const r=Q.data.get(`${t}|${s}`)||0,n=r>0?Math.min(.15+r/Q.maxCount*.85,1):0;return e.jsx("div",{className:"p-1.5 text-center text-xs cursor-pointer transition-colors hover:ring-1 hover:ring-amber-400",style:{backgroundColor:r>0?`rgba(217, 119, 6, ${n})`:"white",color:n>.5?"white":r>0?"#92400e":"#9ca3af"},title:`${t} (${s}): ${r} sermon${r!==1?"s":""}`,onClick:()=>{ve([t]),xe([s.toString()])},children:r>0?r:"Â·"},`${t}-${s}`)})]},t))]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3 text-xs text-gray-500",children:[e.jsx("span",{children:"Fewer"}),e.jsx("div",{className:"flex",children:[.15,.35,.55,.75,.95].map((t,a)=>e.jsx("div",{className:"w-5 h-4",style:{backgroundColor:`rgba(217, 119, 6, ${t})`}},a))}),e.jsx("span",{children:"More sermons"})]})]})]})]}),Ie.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Recent:"}),Ie.slice(0,8).map((t,a)=>e.jsx("button",{onClick:()=>{S(t.term),T(t.term,"",null,{wholeWords:!0})},className:"px-2 py-0.5 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded text-xs transition",children:t.term.length>20?t.term.slice(0,20)+"...":t.term},a)),e.jsx("button",{onClick:()=>{confirm("Clear search history?")&&ut([])},className:"text-xs text-gray-400 hover:text-red-500",children:"âœ•"})]}),e.jsx(fs,{onAnalyze:T,isAnalyzing:st,progress:Wt,initialTerm:"",initialVariations:"",matchedTerms:zt,totalTranscripts:j,defaultTerm:"",defaultRegex:"",externalTerm:Ot}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium self-center mr-2",children:"Featured Series:"}),e.jsxs("button",{onClick:()=>{const t=["63-0317E","63-0318","63-0319","63-0320","63-0321","63-0322","63-0323","63-0324E"],a=x.filter(s=>t.some(r=>s.dateCode===r||s.id?.startsWith(r))).map(s=>s.title);a.length>0&&(ye(a),xe(["1963"]))},className:"px-3 py-1.5 bg-amber-100 hover:bg-amber-200 text-amber-800 rounded-lg text-sm font-medium transition flex items-center gap-1.5",children:[e.jsx(u,{name:"book",size:14})," The Seven Seals"]}),e.jsxs("button",{onClick:()=>{const t=["60-1205","60-1206","60-1207","60-1208","60-1209","60-1210","60-1211E"],a=x.filter(s=>t.some(r=>s.dateCode===r||s.id?.startsWith(r))).map(s=>s.title);a.length>0&&(ye(a),xe(["1960"]))},className:"px-3 py-1.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-800 rounded-lg text-sm font-medium transition flex items-center gap-1.5",children:[e.jsx(u,{name:"book",size:14})," The Seven Church Ages"]}),(je.length!==R.titles.length||we.length!==R.years.length)&&e.jsxs("button",{onClick:()=>{ye(R.titles),xe(R.years)},className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg text-sm font-medium transition flex items-center gap-1.5",children:[e.jsx(u,{name:"x",size:14})," Show All Sermons"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium self-center mr-2",children:"Hot Topics:"}),e.jsxs("button",{onClick:()=>{S('"THUS SAITH THE LORD"'),T('"THUS SAITH THE LORD"',"",null,{wholeWords:!0})},className:"px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg text-sm font-medium transition flex items-center gap-1.5",children:[e.jsx(u,{name:"search",size:14}),' "THUS SAITH THE LORD"']}),e.jsx("button",{onClick:()=>{S("faith"),T("faith","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-purple-100 hover:bg-purple-200 text-purple-800 rounded-lg text-xs font-medium transition",children:"Faith"}),e.jsx("button",{onClick:()=>{S("angel"),T("angel","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg text-xs font-medium transition",children:"Angel"}),e.jsx("button",{onClick:()=>{S('"Holy Ghost" OR "Holy Spirit"'),T('"Holy Ghost" OR "Holy Spirit"',"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-sky-100 hover:bg-sky-200 text-sky-800 rounded-lg text-xs font-medium transition",children:"Holy Ghost"}),e.jsx("button",{onClick:()=>{S('"divine healing" OR healed OR healing'),T('"divine healing" OR healed OR healing',"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-green-100 hover:bg-green-200 text-green-800 rounded-lg text-xs font-medium transition",children:"Divine Healing"}),e.jsx("button",{onClick:()=>{S("prophet"),T("prophet","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded-lg text-xs font-medium transition",children:"Prophet"}),e.jsx("button",{onClick:()=>{S('"end time" OR "last days"'),T('"end time" OR "last days"',"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-rose-100 hover:bg-rose-200 text-rose-800 rounded-lg text-xs font-medium transition",children:"End Time"}),e.jsx("button",{onClick:()=>{S("baptism OR baptized OR baptize"),T("baptism OR baptized OR baptize","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-cyan-100 hover:bg-cyan-200 text-cyan-800 rounded-lg text-xs font-medium transition",children:"Baptism"}),e.jsx("button",{onClick:()=>{S("bride"),T("bride","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-pink-100 hover:bg-pink-200 text-pink-800 rounded-lg text-xs font-medium transition",children:"Bride"}),e.jsx("button",{onClick:()=>{S(`"serpent's seed" OR "serpent seed"`),T(`"serpent's seed" OR "serpent seed"`,"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-lime-100 hover:bg-lime-200 text-lime-800 rounded-lg text-xs font-medium transition",children:"Serpent's Seed"}),e.jsx("button",{onClick:()=>{S('godhead OR trinity OR "oneness"'),T('godhead OR trinity OR "oneness"',"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-violet-100 hover:bg-violet-200 text-violet-800 rounded-lg text-xs font-medium transition",children:"Godhead"}),e.jsx("button",{onClick:()=>{S("rapture"),T("rapture","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-fuchsia-100 hover:bg-fuchsia-200 text-fuchsia-800 rounded-lg text-xs font-medium transition",children:"Rapture"}),e.jsx("button",{onClick:()=>{S('"third pull"'),T('"third pull"',"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-teal-100 hover:bg-teal-200 text-teal-800 rounded-lg text-xs font-medium transition",children:"Third Pull"}),e.jsx("button",{onClick:()=>{S('"seven thunders"'),T('"seven thunders"',"",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-800 rounded-lg text-xs font-medium transition",children:"Seven Thunders"}),e.jsx("button",{onClick:()=>{S("revelation OR revelations"),T("revelation OR revelations","",null,{wholeWords:!0})},className:"px-2.5 py-1 bg-emerald-100 hover:bg-emerald-200 text-emerald-800 rounded-lg text-xs font-medium transition",children:"Revelation"}),w&&e.jsxs("button",{onClick:()=>{Le(""),Ee(""),Ae(null),fe([]),S("")},className:"px-2.5 py-1 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg text-xs font-medium transition flex items-center gap-1",children:[e.jsx(u,{name:"x",size:12})," Clear Search"]})]}),me&&Y.totalMentions===0&&!st&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(u,{name:"alertCircle",size:20,className:"text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-800 text-sm",children:"No Results Found"}),e.jsxs("p",{className:"text-amber-700 text-xs mt-1",children:['Your search for "',e.jsx("span",{className:"font-semibold",children:w}),'" did not match any transcripts.']})]})]}),e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-1.5 sm:gap-2 mb-6",children:[e.jsx(Me,{title:"Sermons",value:Y.totalSermons.toLocaleString(),icon:"book",color:"amber",sub:`of ${j.toLocaleString()} total`}),w&&e.jsx(Me,{title:`"${w}" Matches`,value:Y.totalMentions.toLocaleString(),icon:"search",color:Y.totalMentions===0?"red":"green",sub:"in filtered results"}),e.jsx(Me,{title:"Total Words",value:`${(Y.totalWords/1e6).toFixed(1)}M`,icon:"fileText",color:"blue",sub:"in filtered sermons"}),e.jsx(Me,{title:"Total Hours",value:Math.round(Y.totalDuration/60).toLocaleString(),icon:"clock",color:"purple",sub:"of preaching"}),Y.peakSermon&&w&&e.jsx(Me,{title:"Peak Mentions",value:Y.maxMentions,icon:"activity",color:"orange",sub:"Click to view",onClick:()=>{I({...Y.peakSermon,searchTerm:oe||w}),H(0)}})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-6 rounded-xl border shadow-sm h-[350px] sm:h-[450px] mb-6 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(u,{name:"activity"})," Sermon Timeline (1947-1965)"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w?`Showing "${w}" mentions over time`:"Sermon distribution over time"," â€¢ Click a point to browse"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w&&e.jsxs("button",{onClick:()=>{Le(""),Ee(""),Ae(null),fe([])},className:"text-xs bg-red-100 text-red-700 hover:bg-red-200 px-3 py-1.5 rounded-lg font-medium flex items-center gap-1 transition-colors",children:[e.jsx(u,{name:"x",size:12})," Clear Search"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Smoothing:"}),e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[{w:4,l:"1 Mo"},{w:12,l:"3 Mo"},{w:26,l:"6 Mo"}].map(({w:t,l:a})=>e.jsx("button",{onClick:()=>Bt(t),className:`px-2 py-1 text-xs font-medium rounded ${Fe===t?"bg-white shadow text-amber-600":"text-gray-500"}`,children:a},t))})]})]}),e.jsx(wt,{width:"100%",height:"85%",children:e.jsxs(js,{data:ce,onClick:t=>{if(t&&t.activePayload&&t.activePayload[0]){const a=ce.find(s=>s.timestamp===t.activePayload[0].payload.timestamp);a&&(Ze(a),ss({x:t.chartX||200,y:t.chartY||100}))}},children:[e.jsx(yt,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),e.jsx(vt,{dataKey:"timestamp",type:"number",scale:"time",domain:ns,tickFormatter:rs,tick:{fontSize:10},minTickGap:80}),e.jsx(Nt,{tick:{fontSize:10},label:{value:w?"Mentions":"Sermons",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:11,fill:"#6b7280"}}}),e.jsx(Ct,{content:({active:t,payload:a})=>{if(pe||!t||!a||!a.length)return null;const s=a[0].payload,r=`Week of ${new Date(s.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}`;return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg text-sm border border-gray-200",children:[e.jsx("div",{className:"font-bold text-gray-900",children:r}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w?e.jsxs(e.Fragment,{children:[s.mentionCount," mentions â€¢ "]}):null,s.count," sermon",s.count!==1?"s":""]}),e.jsx("div",{className:"mt-2 text-amber-600 text-xs font-medium",children:"Click to browse â†’"})]})}}),e.jsx(ws,{wrapperStyle:{fontSize:"11px",paddingTop:"8px"}}),w?e.jsxs(e.Fragment,{children:[e.jsx(kt,{type:"monotone",dataKey:"mentionCount",name:"Mentions",stroke:"#f59e0b",fill:"#fcd34d",fillOpacity:.6,isAnimationActive:!1,cursor:"pointer"}),e.jsx(St,{type:"monotone",dataKey:"rollingAvg",name:"Trend",stroke:"#d97706",strokeWidth:3,dot:!1,isAnimationActive:!1})]}):e.jsxs(e.Fragment,{children:[e.jsx(kt,{type:"monotone",dataKey:"count",name:"Sermons",stroke:"#f59e0b",fill:"#fcd34d",fillOpacity:.6,isAnimationActive:!1,cursor:"pointer"}),e.jsx(St,{type:"monotone",dataKey:"volumeRollingAvg",name:"Trend",stroke:"#d97706",strokeWidth:3,dot:!1,isAnimationActive:!1})]})]})}),pe&&e.jsxs("div",{ref:as,className:"fixed sm:absolute inset-x-2 sm:inset-x-auto bottom-2 sm:bottom-auto bg-white rounded-xl shadow-2xl border border-gray-200 sm:w-96 max-h-[60vh] sm:max-h-[400px] flex flex-col z-50",style:{left:typeof window<"u"&&window.innerWidth>=640?Math.min(Math.max(16,pt.x-150),window.innerWidth-450):void 0,top:typeof window<"u"&&window.innerWidth>=640?Math.max(60,pt.y+20):void 0},children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-900",children:["Week of ",new Date(pe.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[pe.sermons?.length||0," sermon",(pe.sermons?.length||0)!==1?"s":""]})]}),e.jsx("button",{onClick:()=>Ze(null),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(u,{name:"x"})})]})}),e.jsx("div",{className:"text-xs font-medium text-gray-600 px-4 pt-3 pb-2",children:"Click a sermon to view transcript:"}),e.jsx("div",{className:"flex-1 overflow-auto px-3 pb-3",children:e.jsx("div",{className:"space-y-2",children:[...pe.sermons||[]].sort((t,a)=>(a.mentionCount||0)-(t.mentionCount||0)).map((t,a)=>e.jsxs("button",{onClick:()=>{I({...t,searchTerm:oe||w}),H(0),Ze(null)},className:"w-full text-left p-3 bg-amber-50 rounded-lg border border-amber-200 hover:bg-amber-100 hover:border-amber-300 transition-all group",children:[e.jsx("div",{className:"font-medium text-gray-900 group-hover:text-amber-700 line-clamp-2",children:t.title||"Untitled"}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs",children:[e.jsx("span",{className:"text-gray-500",children:t.venue||"Unknown venue"}),e.jsx("span",{className:"text-gray-400",children:new Date(t.timestamp).toLocaleDateString()})]}),w&&t.mentionCount>0&&e.jsxs("div",{className:"mt-1 text-xs text-amber-600 font-medium",children:[t.mentionCount," mentions"]})]},t.id||a))})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm mb-8 p-4 sm:p-6 overflow-x-auto w-full",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsxs("h3",{className:"font-bold text-gray-800",children:["Sermon List (",_.length.toLocaleString(),")"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w&&e.jsxs("div",{className:"text-sm bg-amber-50 text-amber-700 px-3 py-1 rounded font-medium",children:["Searching for: ",e.jsx("span",{className:"font-semibold",children:w})]}),e.jsxs("button",{onClick:()=>ge(_,`WMB_All_Transcripts_${_.length}.zip`,`${_.length} sermons`),disabled:k!==null||_.length===0,className:"text-xs bg-amber-500 text-white hover:bg-amber-600 px-3 py-1.5 rounded font-medium flex items-center gap-1 disabled:opacity-50",title:`Download all ${_.length} transcripts as ZIP`,children:[e.jsx(u,{name:"download",size:12})," Download All (",_.length,")"]}),e.jsxs("button",{onClick:ls,className:"text-xs bg-green-100 text-green-700 hover:bg-green-200 px-3 py-1.5 rounded font-medium flex items-center gap-1",title:"Export search results as CSV",children:[e.jsx(u,{name:"download",size:12})," Export CSV"]}),e.jsxs("a",{href:"https://www.livingwordbroadcast.org/wbtextindex",target:"_blank",rel:"noopener noreferrer",className:"text-xs bg-amber-100 text-amber-700 hover:bg-amber-200 px-3 py-1.5 rounded font-medium flex items-center gap-1",children:[e.jsx(u,{name:"externalLink",size:12})," Browse LWB Transcripts"]})]})]}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(u,{name:"search",size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search table by title, venue, date...",value:F.search||"",onChange:t=>Ve(a=>({...a,search:t.target.value})),className:"w-full pl-9 pr-8 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent","data-search-input":!0}),F.search&&e.jsx("button",{onClick:()=>Ve(t=>({...t,search:""})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(u,{name:"x",size:14})})]})]}),e.jsx(ys,{columns:[{key:"date",label:"Date",width:"100px",filterKey:"date",filterPlaceholder:"YYYY",render:t=>t.date},{key:"title",label:"Title",width:"1fr",filterKey:"title",render:t=>e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate block",title:t.title,children:t.title})})},{key:"venue",label:"Venue",width:"200px",filterKey:"venue",hideOnMobile:!0,render:t=>e.jsx("span",{className:"text-xs text-gray-600 truncate",children:t.venue||"â€”"})},{key:"location",label:"Location",width:"140px",hideOnMobile:!0,render:t=>e.jsx("span",{className:"text-xs text-gray-500",children:t.location||"â€”"})},...w?[{key:"mentionCount",label:"Mentions",width:"80px",render:t=>e.jsx("span",{className:`text-xs font-bold ${t.mentionCount>0?"text-amber-600":"text-gray-400"}`,children:t.mentionCount||0})}]:[],{key:"readTime",label:"Read Time",width:"75px",hideOnMobile:!0,render:t=>{const a=Math.round((t.wordCount||0)/Ge);return e.jsx("span",{className:"text-xs text-gray-500",children:a>60?`${Math.round(a/60)}h ${a%60}m`:`${a}m`})}},{key:"wordCount",label:"Words",width:"90px",hideOnMobile:!0,render:t=>e.jsx("span",{className:"text-xs text-gray-500",children:t.wordCount?.toLocaleString()||"â€”"})},{key:"download",label:"Download",width:"90px",render:t=>t.path?e.jsxs("a",{href:`/wmbmentions.github.io/${qe(t.path)}`,download:!0,onClick:s=>s.stopPropagation(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:[e.jsx(u,{name:"download",size:12})," TXT"]}):"â€”"}],data:_,filters:F,onFilterChange:(t,a)=>Ve(s=>({...s,[t]:a})),sortConfig:le,onSort:t=>Ke(a=>({key:t,direction:a.key===t&&a.direction==="asc"?"desc":"asc"})),onRowClick:t=>{I({...t,searchTerm:oe||w}),H(0)},rowHeight:48})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Archive Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-700",children:j.toLocaleString()}),e.jsx("div",{className:"text-sm text-amber-600",children:"Total Sermons"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700",children:[(et/1e6).toFixed(1),"M"]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Total Words"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:Math.round(Lt/60).toLocaleString()}),e.jsx("div",{className:"text-sm text-purple-600",children:"Hours of Preaching"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:tt.length}),e.jsx("div",{className:"text-sm text-green-600",children:"Unique Venues"})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-bold text-indigo-800 flex items-center gap-2",children:[e.jsx(u,{name:"book",size:18})," Scripture References"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Z&&e.jsxs("div",{className:"flex bg-white rounded-lg border overflow-hidden",children:[e.jsx("button",{onClick:()=>_e("grid"),className:`px-3 py-1.5 text-sm font-medium transition-colors ${Oe==="grid"?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Grid"}),e.jsx("button",{onClick:()=>_e("heatmap"),className:`px-3 py-1.5 text-sm font-medium transition-colors ${Oe==="heatmap"?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Heatmap"})]}),!Z&&e.jsx("button",{onClick:ts,disabled:Te,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:Te?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{name:"search",size:14})," Scan Transcripts"]})})]})]}),!Z&&!Te&&e.jsx("p",{className:"text-sm text-indigo-600",children:'Click "Scan Transcripts" to find all Bible references mentioned across the archive. This may take a few minutes.'}),Z&&Oe==="grid"&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-indigo-600 mb-3",children:["Found references to ",Z.length," books of the Bible"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 max-h-64 overflow-y-auto",children:Z.slice(0,24).map(({book:t,count:a,refs:s})=>{const r=Be.has(`scripture-${t}`);return e.jsxs("div",{className:"bg-white rounded border overflow-hidden",children:[e.jsxs("button",{onClick:()=>ke(n=>{const i=new Set(n),o=`scripture-${t}`;return i.has(o)?i.delete(o):i.add(o),i}),className:`w-full p-2 flex justify-between items-center text-sm ${r?"bg-indigo-100":"hover:bg-gray-50"}`,children:[e.jsx("span",{className:"font-medium text-gray-800 truncate",children:t}),e.jsx("span",{className:"text-xs text-indigo-600 ml-1",children:a.toLocaleString()})]}),r&&e.jsx("div",{className:"border-t p-2 text-xs space-y-1 max-h-40 overflow-y-auto bg-gray-50",children:s.map(({ref:n,count:i})=>e.jsxs("button",{onClick:()=>{S(n),T(n,"",null,{wholeWords:!1})},className:"w-full text-left px-2 py-1 hover:bg-indigo-100 rounded flex justify-between",children:[e.jsx("span",{className:"truncate",children:n}),e.jsxs("span",{className:"text-indigo-500 ml-1",children:["(",i,")"]})]},n))})]},t)})})]}),Z&&Oe==="heatmap"&&(()=>{const t=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi"],a=["Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"],s=Math.max(...Z.map(i=>i.count)),r=new Map(Z.map(i=>[i.book,i])),n=(i,o)=>i.filter(l=>r.has(l)).length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-bold text-indigo-700 mb-2",children:o}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.map(l=>{const m=r.get(l),h=m?.count||0,p=h>0?Math.min(.15+h/s*.85,1):0;return e.jsx("button",{onClick:()=>{m&&(ke($=>{const N=new Set($),y=`scripture-${l}`;return N.has(y)?N.delete(y):N.add(y),N}),_e("grid"))},className:`px-2 py-1 rounded text-xs font-medium transition-colors ${h>0?"cursor-pointer hover:ring-1 hover:ring-indigo-400":"cursor-default opacity-30"}`,style:{backgroundColor:h>0?`rgba(79, 70, 229, ${p})`:"#e5e7eb",color:p>.5?"white":h>0?"#3730a3":"#9ca3af"},title:h>0?`${l}: ${h.toLocaleString()} references`:`${l}: No references found`,children:l.length>10?l.slice(0,8)+"...":l},l)})})]},o);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-indigo-600 mb-3",children:["Found references to ",Z.length," books of the Bible. Click a book to see specific verses."]}),n(t,"Old Testament"),n(a,"New Testament"),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3 text-xs text-gray-500",children:[e.jsx("span",{children:"Fewer"}),e.jsx("div",{className:"flex",children:[.15,.35,.55,.75,.95].map((i,o)=>e.jsx("div",{className:"w-5 h-4",style:{backgroundColor:`rgba(79, 70, 229, ${i})`}},o))}),e.jsx("span",{children:"More references"})]})]})})()]}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Featured Sermon Series"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:Object.entries(Ue).map(([t,a])=>{const s=Qt(t),r=Be.has(t),n={amber:{bg:"bg-amber-50",border:"border-amber-200",header:"bg-amber-100",text:"text-amber-800",badge:"bg-amber-600"},indigo:{bg:"bg-indigo-50",border:"border-indigo-200",header:"bg-indigo-100",text:"text-indigo-800",badge:"bg-indigo-600"}}[a.color]||{bg:"bg-gray-50",border:"border-gray-200",header:"bg-gray-100",text:"text-gray-800",badge:"bg-gray-600"};return e.jsxs("div",{className:`rounded-lg border ${n.border} overflow-hidden`,children:[e.jsxs("button",{onClick:()=>ke(i=>{const o=new Set(i);return o.has(t)?o.delete(t):o.add(t),o}),className:`w-full p-3 ${n.header} flex items-center justify-between transition hover:opacity-90`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{name:"book",size:18,className:n.text}),e.jsx("span",{className:`font-bold ${n.text}`,children:t}),e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full text-white ${n.badge}`,children:[s.length," sermons"]})]}),e.jsx(u,{name:r?"chevronUp":"chevronDown",size:18,className:n.text})]}),r&&e.jsxs("div",{className:`${n.bg} p-3`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:a.description}),e.jsx("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:e.jsxs("button",{onClick:i=>{i.stopPropagation(),ge(s,`WMB_${t.replace(/[^a-zA-Z0-9]+/g,"_")}.zip`,t)},disabled:k!==null,className:"px-2 py-0.5 text-xs bg-amber-500 text-white rounded hover:bg-amber-600 transition disabled:opacity-50 flex items-center gap-1",title:`Download all ${s.length} sermons as ZIP`,children:[e.jsx(u,{name:"download",size:12})," ZIP (",s.length,")"]})})]}),e.jsx("div",{className:"space-y-1",children:s.map(i=>e.jsxs("button",{onClick:()=>{I(i),H(0)},className:"w-full text-left p-2 bg-white rounded border hover:bg-gray-50 transition flex justify-between items-center group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-800 text-sm truncate",children:i.title}),e.jsx("div",{className:"text-xs text-gray-500",children:i.date})]}),e.jsx(u,{name:"chevronRight",size:14,className:"text-gray-400 group-hover:text-gray-600 flex-shrink-0 ml-2"})]},i.id))})]})]},t)})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Top Topics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Object.entries(At).slice(0,12).map(([t,a])=>{const s=Be.has(`topic-${t}`),r=`topic-${t}`,n=ht[r]||"",i=x.filter(d=>d.topics&&d.topics.includes(t)).sort((d,l)=>(d.date||"").localeCompare(l.date||"")),o=s?n?i.filter(d=>d.title.toLowerCase().includes(n.toLowerCase())||(d.date||"").includes(n)):i:[];return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>ke(d=>{const l=new Set(d),m=`topic-${t}`;return l.has(m)?l.delete(m):l.add(m),l}),className:`w-full p-3 flex justify-between items-center transition ${s?"bg-gray-100":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"font-medium text-gray-700",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[a," sermons"]}),e.jsx(u,{name:s?"chevronUp":"chevronDown",size:14,className:"text-gray-400"})]})]}),s&&e.jsxs("div",{className:"bg-white border-t max-h-80 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-50 p-2 border-b space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," sermons",n&&" (filtered)"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:d=>{d.stopPropagation(),ge(o,`WMB_${t.replace(/[^a-zA-Z0-9]+/g,"_")}_Sermons.zip`,t)},disabled:k!==null,className:"px-2 py-0.5 text-xs bg-amber-500 text-white rounded hover:bg-amber-600 transition disabled:opacity-50 flex items-center gap-1",title:`Download all ${o.length} sermons about ${t} as ZIP`,children:[e.jsx(u,{name:"download",size:12})," ZIP (",o.length,")"]}),e.jsx("button",{onClick:d=>{d.stopPropagation();const l=o.map($=>`${$.date} - ${$.title}`).join(`
`),m=new Blob([l],{type:"text/plain"}),h=URL.createObjectURL(m),p=document.createElement("a");p.href=h,p.download=`WMB_${t.replace(/[^a-zA-Z0-9]+/g,"_")}_Index.txt`,p.click(),URL.revokeObjectURL(h)},className:"px-2 py-0.5 text-xs bg-gray-400 text-white rounded hover:bg-gray-500 transition",title:`Download index of ${o.length} sermons`,children:"Index"})]})]}),e.jsx("input",{type:"text",placeholder:"Search sermons...",value:n,onClick:d=>d.stopPropagation(),onChange:d=>xt(l=>({...l,[r]:d.target.value})),className:"w-full text-xs border rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-amber-500"})]}),e.jsxs("div",{className:"p-2",children:[o.map(d=>e.jsxs("div",{className:"flex items-center gap-1 hover:bg-gray-50 rounded transition",children:[e.jsxs("button",{onClick:()=>{I(d),H(0)},className:"flex-1 text-left p-2 flex justify-between items-center text-sm min-w-0",children:[e.jsx("span",{className:"truncate text-gray-800",children:d.title}),e.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:d.date})]}),e.jsx("a",{href:d.lwbUrl||"https://www.livingwordbroadcast.org/wbtextindex",target:"_blank",rel:"noopener noreferrer",title:"Download from Living Word Broadcast",className:"p-2 text-gray-400 hover:text-amber-600 flex-shrink-0",children:e.jsx(u,{name:"download",size:14})})]},d.id)),o.length===0&&n&&e.jsxs("p",{className:"text-xs text-gray-400 text-center py-4",children:['No sermons match "',n,'"']})]})]})]},t)})})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:[e.jsx(u,{name:"location",className:"inline mr-2",size:20}),"Browse by Venue (",tt.length,")"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Click a venue to see all sermons preached there"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-96 overflow-y-auto",children:X.slice(0,30).map(t=>{const a=Be.has(`venue-${t.venue}`),s=`venue-${t.venue}`,r=ht[s]||"",n=x.filter(o=>o.venue===t.venue).sort((o,d)=>(o.date||"").localeCompare(d.date||"")),i=a?r?n.filter(o=>o.title.toLowerCase().includes(r.toLowerCase())||(o.date||"").includes(r)):n:[];return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>ke(o=>{const d=new Set(o),l=`venue-${t.venue}`;return d.has(l)?d.delete(l):d.add(l),d}),className:`w-full p-3 flex justify-between items-center transition ${a?"bg-blue-50":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("span",{className:"font-medium text-gray-700 truncate block",children:t.venue}),t.dateRange&&t.dateRange!=="N/A"&&e.jsx("span",{className:"text-xs text-gray-400",children:t.dateRange})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:t.count}),e.jsx(u,{name:a?"chevronUp":"chevronDown",size:14,className:"text-gray-400"})]})]}),a&&e.jsxs("div",{className:"bg-white border-t max-h-80 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-50 p-2 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[i.length,r?` of ${n.length}`:""," sermons"]}),e.jsx("div",{className:"flex gap-1",children:e.jsxs("button",{onClick:o=>{o.stopPropagation(),ge(n,`WMB_${t.venue.replace(/[^a-zA-Z0-9]+/g,"_")}_Sermons.zip`,t.venue)},disabled:k!==null,className:"px-2 py-0.5 text-xs bg-amber-500 text-white rounded hover:bg-amber-600 transition disabled:opacity-50 flex items-center gap-1",title:`Download all ${n.length} sermons from ${t.venue} as ZIP`,children:[e.jsx(u,{name:"download",size:12})," ZIP"]})})]}),e.jsx("input",{type:"text",placeholder:"Search sermons...",value:r,onChange:o=>xt(d=>({...d,[s]:o.target.value})),onClick:o=>o.stopPropagation(),className:"w-full px-2 py-1 text-xs border rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{className:"p-2",children:[i.map(o=>e.jsxs("button",{onClick:()=>{I(o),H(0)},className:"w-full text-left p-2 hover:bg-gray-50 rounded transition flex justify-between items-center text-sm",children:[e.jsx("span",{className:"truncate text-gray-800 flex-1 min-w-0",children:o.title}),e.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:o.date})]},o.id)),i.length===0&&r&&e.jsxs("p",{className:"text-xs text-gray-400 text-center py-2",children:['No sermons match "',r,'"']})]})]})]},t.venue)})})]})]}),Ne==="data"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:[e.jsx(u,{name:"calendar",className:"inline mr-2",size:20}),"All Transcripts by Year"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Click a year to expand and see all sermons. Click a sermon to view its full transcript."})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>ge(x,"WMB_All_Sermons.zip","all"),disabled:k!==null,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white rounded-lg text-sm font-medium transition flex items-center gap-2 whitespace-nowrap",children:[e.jsx(u,{name:"download",size:16}),k?.year==="all"?`Downloading ${k.current}/${k.total}...`:`Download All (${x.length})`]})})]}),k&&e.jsx("div",{className:"mb-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-amber-600 border-t-transparent rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-amber-800",children:["Downloading ",k.year==="all"?"all transcripts":`${k.year} transcripts`,"..."]}),e.jsxs("div",{className:"text-xs text-amber-600",children:[k.current," of ",k.total," files"]})]}),e.jsx("div",{className:"w-32 bg-amber-200 rounded-full h-2",children:e.jsx("div",{className:"bg-amber-600 h-2 rounded-full transition-all",style:{width:`${k.current/k.total*100}%`}})})]})}),e.jsx("div",{className:"space-y-2",children:os.map(({year:t,sermons:a,count:s,totalWords:r})=>{const n=_t.has(t),i=Vt[t]||"",o=Kt[t]||{key:"date",direction:"asc"},d=a.filter(l=>{if(!i)return!0;const m=i.toLowerCase();return(l.title||"").toLowerCase().includes(m)||(l.venue||"").toLowerCase().includes(m)||(l.date||"").toLowerCase().includes(m)}).sort((l,m)=>{const h=o.direction==="asc"?1:-1;return o.key==="date"?h*(l.date||"").localeCompare(m.date||""):o.key==="title"?h*(l.title||"").localeCompare(m.title||""):o.key==="venue"?h*(l.venue||"").localeCompare(m.venue||""):0});return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 transition-colors ${n?"bg-amber-100":"bg-amber-50 hover:bg-amber-100"}`,children:[e.jsxs("button",{onClick:()=>{Ut(l=>{const m=new Set(l);return m.has(t)?m.delete(t):m.add(t),m})},className:"flex items-center gap-3 flex-1 text-left",children:[e.jsx(u,{name:n?"chevronDown":"chevronRight",size:18,className:"text-amber-600"}),e.jsx("span",{className:"text-lg font-bold text-amber-800",children:t}),e.jsxs("span",{className:"text-sm text-amber-600",children:["(",s," sermons)"]}),e.jsxs("span",{className:"text-sm text-amber-700 ml-auto mr-4",children:[(r/1e3).toFixed(0),"K words"]})]}),e.jsxs("button",{onClick:l=>{l.stopPropagation();const m=a.filter(y=>y.path);if(m.length===0){alert("No downloadable transcripts for this year");return}const h=`William Branham Sermons - ${t}
${"=".repeat(40)}

${m.length} sermons

Download each transcript from Living Word Broadcast:
https://www.livingwordbroadcast.org/wbtextindex

--- Sermon List ---

${m.map(y=>`${y.date} - ${y.title}
  Venue: ${y.venue||"Unknown"}
  Words: ${y.wordCount?.toLocaleString()||"N/A"}`).join(`

`)}`,p=new Blob([h],{type:"text/plain"}),$=URL.createObjectURL(p),N=document.createElement("a");N.href=$,N.download=`WMB_Sermons_${t}_Index.txt`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL($)},className:"px-2 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded text-xs font-medium transition flex items-center gap-1",title:`Download index for ${t}`,children:[e.jsx(u,{name:"fileText",size:12})," Index"]}),e.jsxs("button",{onClick:l=>{l.stopPropagation(),ge(a,`WMB_Sermons_${t}.zip`,t)},disabled:k!==null,className:"px-2 py-1.5 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white rounded text-xs font-medium transition flex items-center gap-1",title:`Download all ${s} transcripts for ${t} as ZIP`,children:[e.jsx(u,{name:"download",size:12}),k?.year===t?`${k.current}/${k.total}`:`ZIP (${s})`]})]}),n&&e.jsxs("div",{className:"bg-white border-t p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(u,{name:"search",size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search sermons by title, venue, or date...",value:i,onChange:l=>mt(m=>({...m,[t]:l.target.value})),className:"w-full pl-7 pr-3 py-1.5 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-amber-500"}),i&&e.jsx("button",{onClick:()=>mt(l=>({...l,[t]:""})),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(u,{name:"x",size:12})})]}),e.jsxs("div",{className:"flex gap-1 text-xs",children:[e.jsx("span",{className:"text-gray-500 self-center mr-1",children:"Sort:"}),["date","title","venue"].map(l=>e.jsxs("button",{onClick:()=>Zt(m=>({...m,[t]:{key:l,direction:m[t]?.key===l&&m[t]?.direction==="asc"?"desc":"asc"}})),className:`px-2 py-1 rounded ${o.key===l?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[l.charAt(0).toUpperCase()+l.slice(1),o.key===l&&(o.direction==="asc"?" â†‘":" â†“")]},l))]})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm min-w-[700px]",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 font-medium text-gray-600",children:"Date"}),e.jsx("th",{className:"text-left p-2 font-medium text-gray-600",children:"Title"}),e.jsx("th",{className:"text-left p-2 font-medium text-gray-600 hidden sm:table-cell",children:"Venue"}),e.jsx("th",{className:"text-right p-2 font-medium text-gray-600 hidden md:table-cell",children:"Words"}),e.jsx("th",{className:"text-center p-2 font-medium text-gray-600",children:"Source"}),e.jsx("th",{className:"text-center p-2 font-medium text-gray-600",children:"Download"})]})}),e.jsx("tbody",{children:d.map((l,m)=>e.jsxs("tr",{onClick:()=>{I(l),H(0)},className:"border-t cursor-pointer hover:bg-amber-50 transition-colors",children:[e.jsx("td",{className:"p-2 text-gray-600 whitespace-nowrap",children:l.date}),e.jsx("td",{className:"p-2 font-medium text-gray-800",children:l.title}),e.jsx("td",{className:"p-2 text-gray-600 hidden sm:table-cell",children:l.venue}),e.jsx("td",{className:"p-2 text-gray-500 text-right hidden md:table-cell",children:l.wordCount?.toLocaleString()}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("a",{href:"https://www.livingwordbroadcast.org/wbtextindex",target:"_blank",rel:"noopener noreferrer",onClick:h=>h.stopPropagation(),className:"text-xs text-amber-600 hover:text-amber-800 font-medium",children:"LWB â†—"})}),e.jsx("td",{className:"p-2 text-center",children:l.path&&e.jsxs("a",{href:`/wmbmentions.github.io/${qe(l.path)}`,download:!0,onClick:h=>h.stopPropagation(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium inline-flex items-center gap-1",children:[e.jsx(u,{name:"download",size:12})," TXT"]})})]},l.id||m))})]}),d.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No sermons match your search."})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t",children:["Showing ",d.length," of ",s," sermons"]})]})]},t)})})]})}),Ne==="about"&&e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"About This Archive"}),e.jsxs("div",{className:"prose prose-sm max-w-none text-gray-600",children:[e.jsxs("p",{children:["This searchable archive contains ",e.jsxs("strong",{children:[j.toLocaleString()," sermon transcripts"]})," from William Branham's ministry spanning ",e.jsx("strong",{children:Qe}),"."]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Features"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Full-text search"})," with regex and boolean operators (AND, OR, NOT, NEAR)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Topic filtering"})," by detected sermon themes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Timeline visualization"})," of sermons and search results"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Venue breakdown"})," showing where sermons were preached"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Direct links"})," to Living Word Broadcast for each sermon"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Data Source"}),e.jsxs("p",{children:["All transcripts are sourced from ",e.jsx("a",{href:"https://www.livingwordbroadcast.org/wbtextindex",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:text-amber-800",children:"Living Word Broadcast"}),"."]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Search Tips"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"seven seals"})," - Find exact phrase"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"bride AND rapture"})," - Both terms required"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"prophet OR messenger"})," - Either term"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"healing NOT cancer"})," - Exclude a term"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"seal* "})," - Wildcard (seals, sealed, etc.)"]})]})]})]})]}),ie&&e.jsx(vs,{sermon:ie,searchTerm:ie.searchTerm,wholeWords:at.current?.wholeWords!==!1,onClose:()=>I(null),focusIndex:Ht,onFocusChange:H,onSaveProgress:qt,resumePosition:ie.resumePosition,relatedSermons:es(ie),onSelectRelated:t=>{I({...t,searchTerm:oe||w}),H(0)}}),Ce&&(()=>{const t=x.filter(s=>s.venue===Ce).sort((s,r)=>(s.date||"").localeCompare(r.date||"")),a=X.find(s=>s.venue===Ce);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>We(null),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:Ce}),e.jsxs("p",{className:"text-amber-100 text-sm",children:[t.length," sermons â€¢ ",a?.dateRange||"Unknown dates"]})]}),e.jsx("button",{onClick:()=>We(null),className:"text-white/80 hover:text-white p-1",children:e.jsx(u,{name:"x",size:24})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(80vh-80px)]",children:e.jsx("div",{className:"space-y-1",children:t.map(s=>e.jsxs("button",{onClick:()=>{I(s),H(0),We(null)},className:"w-full text-left p-3 hover:bg-amber-50 rounded-lg transition flex justify-between items-center border border-transparent hover:border-amber-200",children:[e.jsx("span",{className:"text-gray-800 flex-1 min-w-0 truncate",children:s.title}),e.jsx("span",{className:"text-sm text-gray-500 ml-3 flex-shrink-0",children:s.date})]},s.id))})})]})})})(),ct&&e.jsx(Ns,{...ct,onClose:()=>Jt(null),onSermonSelect:t=>{I({...t,searchTerm:oe||w}),H(0)}})]})})}export{Ds as default};
